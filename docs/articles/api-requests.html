<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>API Requests â€¢ caladaptr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="API Requests">
<meta property="og:description" content="caladaptr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81567502-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-81567502-3');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">caladaptr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/api-requests.html">API Requests</a>
    </li>
    <li>
      <a href="../articles/large-queries.html">Large Queries</a>
    </li>
    <li>
      <a href="../articles/rasters-pt1.html">Rasters Part I: Download, Combine, Subset, and Compute Pixel Summaries</a>
    </li>
    <li>
      <a href="../articles/rasters-pt2.html">Rasters Part II: Six-Dimensional Climate Data Cubes and Spatial Queries</a>
    </li>
    <li>
      <a href="../articles/rasters-pt3.html">Rasters Part III: Downloading Rasters for Large Areas</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    R Notebooks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://ucanr-igis.github.io/caladaptr-res/notebooks/caladaptr_intro.nb.html">Introduction</a>
    </li>
    <li>
      <a href="https://ucanr-igis.github.io/caladaptr-res/notebooks/chill.nb.html">Compute Chill</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Shiny Apps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://caladaptr.shinyapps.io/timeseries/">Annual Data Time Series</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Presentations
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://ucanr-igis.github.io/caladaptr-res/pres/overview.html">Overview</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ucanr-igis/caladaptr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="api-requests_files/header-attrs-2.10/header-attrs.js"></script><script src="api-requests_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="api-requests_files/jquery-1.12.4/jquery.min.js"></script><link href="api-requests_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="api-requests_files/leaflet-1.3.1/leaflet.js"></script><link href="api-requests_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="api-requests_files/proj4-2.6.2/proj4.min.js"></script><script src="api-requests_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="api-requests_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="api-requests_files/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="api-requests_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="api-requests_files/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>API Requests</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ucanr-igis/caladaptr/blob/master/vignettes/api-requests.Rmd"><code>vignettes/api-requests.Rmd</code></a></small>
      <div class="hidden name"><code>api-requests.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Before you can fetch data of any kind from Cal-Adapt, you have to construct an API request object. Creating an API request object is like filling out an order form. Once completed, you feed the API request to a function that actually retrieves data (either tabular or raster).</p>
<p>An API request object contains all the information needed to fetch data, including the location(s) of interest, dataset(s), and time period. In practice, you construct an API request object by stringing together a series of functions that specify the different pieces of the request. Examples:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ucanr-igis.github.io/caladaptr">caladaptr</a></span><span class="op">)</span>
<span class="co">#&gt; caladaptr (version 0.6.1)</span>
<span class="co">#&gt; URL: https://ucanr-igis.github.io/caladaptr</span>
<span class="co">#&gt; Bug reports: https://github.com/ucanr-igis/caladaptr/issues</span>

<span class="co">## Request modeled climate data (from Scripps)</span>
<span class="va">sac_minmaxtemp_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_loc_pt.html">ca_loc_pt</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">121.4687</span>, <span class="fl">38.5938</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co">## pointlocation(s)</span>
  <span class="fu"><a href="../reference/ca_gcm.html">ca_gcm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"HadGEM2-ES"</span>, <span class="st">"CNRM-CM5"</span>, <span class="st">"CanESM2"</span>,<span class="st">"MIROC5"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>          <span class="co">## GCM(s)</span>
  <span class="fu"><a href="../reference/ca_scenario.html">ca_scenario</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rcp45"</span>,<span class="st">"rcp85"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>                                  <span class="co">## emission scenarios(s)</span>
  <span class="fu"><a href="../reference/ca_cvar.html">ca_cvar</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tasmin"</span>, <span class="st">"tasmax"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>                                   <span class="co">## climate variables</span>
  <span class="fu"><a href="../reference/ca_period.html">ca_period</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span> <span class="op">%&gt;%</span>                                                <span class="co">## temporal aggregation period</span>
  <span class="fu"><a href="../reference/ca_years.html">ca_years</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">1971</span>, end <span class="op">=</span> <span class="fl">2070</span><span class="op">)</span>                                   <span class="co">## start and end dates</span>

<span class="co">## Specify Livneh data (observed historical) for a HUC10 watershed</span>
<span class="va">huc_pr_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_loc_aoipreset.html">ca_loc_aoipreset</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"hydrounits"</span>,                    <span class="co">## Preset AOI</span>
                               idfld <span class="op">=</span> <span class="st">"huc10"</span>,
                               idval <span class="op">=</span> <span class="st">"1809020409"</span><span class="op">)</span> <span class="op">%&gt;%</span>              
  <span class="fu"><a href="../reference/ca_livneh.html">ca_livneh</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>                                                  <span class="co">## Livneh data </span>
  <span class="fu"><a href="../reference/ca_cvar.html">ca_cvar</a></span><span class="op">(</span><span class="st">"pr"</span><span class="op">)</span> <span class="op">%&gt;%</span>                                                    <span class="co">## precipitation</span>
  <span class="fu"><a href="../reference/ca_period.html">ca_period</a></span><span class="op">(</span><span class="st">"day"</span><span class="op">)</span> <span class="op">%&gt;%</span>                                                 <span class="co">## daily</span>
  <span class="fu"><a href="../reference/ca_dates.html">ca_dates</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"1960-10-01"</span>, end <span class="op">=</span> <span class="st">"2010-09-30"</span><span class="op">)</span> <span class="op">%&gt;%</span>               <span class="co">## start and end dates</span>
  <span class="fu"><a href="../reference/ca_options.html">ca_options</a></span><span class="op">(</span>spatial_ag <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span>                                      <span class="co">## spatially aggregate w/ mean</span>

<span class="co">## Specify desired data by slug for irrigated water management districts</span>
<span class="va">irwm_ht_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_loc_aoipreset.html">ca_loc_aoipreset</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"irwm"</span>, idfld <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span> <span class="op">%&gt;%</span>     <span class="co">## Preset AOI</span>
  <span class="fu"><a href="../reference/ca_slug.html">ca_slug</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"exheat_year_ens32avg_historical"</span>,                         <span class="co">## slug(s) </span>
            <span class="st">"exheat_year_ens32avg_rcp45"</span>,
            <span class="st">"exheat_year_ens32avg_rcp85"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/ca_options.html">ca_options</a></span><span class="op">(</span>spatial_ag <span class="op">=</span> <span class="st">"max"</span><span class="op">)</span>                                       <span class="co">## spatially aggregate w/ max</span></code></pre></div>
<p><br></p>
</div>
<div id="specifying-location" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-location" class="anchor"></a>Specifying Location</h2>
<p>All API requests must specify the location(s) of interest. Locations can be specified by points, preset areas-of-interest, or user-provided geoms. All of these options allow you to specify a primary key field which will be included in the results so the results can be joined to the input features.</p>
<p><br></p>
<p><em>1) Points</em></p>
<p>Point locations can be included using <code><a href="../reference/ca_loc_pt.html">ca_loc_pt()</a></code> if the points are saved in a vector, matrix or data frame, and <code><a href="../reference/ca_loc_sf.html">ca_loc_sf()</a></code> if the points are in a simple feature data frame.</p>
<p>If points are passed in a matrix, vector or data frame, the first column should be longitude (x), and the second column should be latitude (y). Geographic coordinates are not required if the points are in a sf data frame (but its a good idea). Example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/ca_loc_pt.html">ca_loc_pt</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">122.1</span>, <span class="fl">38.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): </span>
<span class="co">#&gt;   x: -122.1</span>
<span class="co">#&gt;   y: 38.1</span>
<span class="co">#&gt; </span></code></pre></div>
<p><br></p>
<p><em>2) Preset areas-of-interest</em></p>
<p>The Cal-Adapt API is integrated with a number of preset polygon areas-of-interest, also referred to as <em>boundary layers</em>. These are things like county boundaries, census tracts, watersheds, etc. If your study area(s) coincide with one of these layers, you can specify them by name using <code><a href="../reference/ca_loc_aoipreset.html">ca_loc_aoipreset()</a></code>.</p>
<p>To see a list of the available preset layers, run:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">aoipreset_types</span>
<span class="co">#&gt;  [1] "censustracts"      "counties"          "cdistricts"       </span>
<span class="co">#&gt;  [4] "ccc4aregions"      "climregions"       "hydrounits"       </span>
<span class="co">#&gt;  [7] "irwm"              "electricutilities" "wecc-load-area"   </span>
<span class="co">#&gt; [10] "evtlocations"      "place"</span></code></pre></div>
<p>When you use a preset AOI layer in an API request, you can specify which feature(s) youâ€™re interested in (if you donâ€™t want them all). For example if you want data summarized by county, you can specify which of the over 50 counties in California youâ€™re interested in. Two arguments must be passed to specify features of interest: i) <code>idfld</code> (a field in the attribute table that has unique values), and ii) <code>idval</code> (the id numbers or values of the features). Example:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/ca_loc_aoipreset.html">ca_loc_aoipreset</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"counties"</span>, idfld <span class="op">=</span> <span class="st">"fips"</span>, idval <span class="op">=</span> <span class="st">"06013"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): </span>
<span class="co">#&gt;   AOI Preset: counties</span>
<span class="co">#&gt;   fips(s): 06013</span>
<span class="co">#&gt; </span></code></pre></div>
<p>To figure out which fields are available to specify locations for a given preset layer, you can use the built-in constant <code>aoipreset_idflds</code>. For example if youâ€™re interested in counties, you can use the following fields:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">aoipreset_idflds</span><span class="op">$</span><span class="va">counties</span>
<span class="co">#&gt; [1] "fips" "id"</span></code></pre></div>
<p>To see the valid values to specify features, use the built-in constant <code>aoipreset_idval</code>. For example, the â€˜Countiesâ€™ preset layer has a column named â€˜fipsâ€™ you can use to specify which county(s) youâ€™re interested in. The values look like:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">aoipreset_idval</span><span class="op">$</span><span class="va">counties</span><span class="op">$</span><span class="va">fips</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "06001" "06003" "06005" "06007" "06009" "32510"</span></code></pre></div>
<p><br></p>
<p>All the preset areas of interest can be imported as sf objects using <code><a href="../reference/ca_aoipreset_geom.html">ca_aoipreset_geom()</a></code>. For example the climate regions for the 5th climate change assessment look like:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ca_climregions_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_aoipreset_geom.html">ca_aoipreset_geom</a></span><span class="op">(</span><span class="st">"climregions"</span><span class="op">)</span>
<span class="co">#&gt; Reading layer `climregions' from data source </span>
<span class="co">#&gt;   `C:\Users\Andy\AppData\Local\R\cache\R\caladaptr\climregions.gpkg' </span>
<span class="co">#&gt;   using driver `GPKG'</span>
<span class="co">#&gt; Simple feature collection with 11 features and 2 fields</span>
<span class="co">#&gt; Geometry type: MULTIPOLYGON</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: -13848750 ymin: 3833695 xmax: -12705800 ymax: 5163721</span>
<span class="co">#&gt; Projected CRS: WGS 84 / Pseudo-Mercator</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mtennekes/tmap">tmap</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">ca_climregions_sf</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_polygons.html">tm_fill</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"MAP_COLORS"</span>, palette <span class="op">=</span> <span class="st">"Pastel1"</span><span class="op">)</span></code></pre></div>
<p><img src="api-requests_files/figure-html/ca_climregions_sf-1.png" width="700"></p>
<p><br></p>
<p><em>3) User-provided sf features</em></p>
<p>If Cal-Adaptâ€™s preset areas-of-interest donâ€™t align with your study area(s), you can provide your own locations as a simple feature data frame. Your sf object should have a column with unique values (like OBJECTID) to join the input features to the Cal-Adapt data.</p>
<p>Add locations from a sf object to an API request with <code><a href="../reference/ca_loc_sf.html">ca_loc_sf()</a></code>. POINT, POLYGON, and MULTIPOLYGON geometries are supported. Lines are not supported, and multipoint features must be converted to simple point features (see <code>st_cast</code>). The <code>idfld</code> argument specifies a column in the sf object that contains unique values. If the sf object lacks a column with unique values, you can add one using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, or provide a vector of unique id values with <code>idval</code>.</p>
<p>The Cal-Adapt API has limits as to how large a spatial area can be queried. If your area-of-interest is larger than a county, consider blocking the area with <code><a href="../reference/ca_biggeom_blocks.html">ca_biggeom_blocks()</a></code>. If your locations include multiple points per 6km LOCA grid cell (Cal-Adaptâ€™s smallest spatial unit), you can group them and just make one call per grid cell (see the <a href="large-queries-sqlite.html">Large Queries</a> vignette for sample code).</p>
<p>In the next example, we get a sf data frame of the Congressional Districts, and use it to start an API request object.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Get Congressional Districts as a sf object</span>
<span class="op">(</span><span class="va">cdistricts_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_aoipreset_geom.html">ca_aoipreset_geom</a></span><span class="op">(</span><span class="st">"cdistricts"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Simple feature collection with 66 features and 9 fields</span>
<span class="co">#&gt; Geometry type: MULTIPOLYGON</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: -13866650 ymin: 3675964 xmax: -12138860 ymax: 6275056</span>
<span class="co">#&gt; Projected CRS: WGS 84 / Pseudo-Mercator</span>
<span class="co">#&gt; First 10 features:</span>
<span class="co">#&gt;    statefp cd114fp      affgeoid geoid lsad cdsessn        aland     awater id</span>
<span class="co">#&gt; 1       06      11 5001400US0611  0611   C2     114   1278249894   92424585  1</span>
<span class="co">#&gt; 2       06      41 5001400US0641  0641   C2     114    819873792    4240410  2</span>
<span class="co">#&gt; 3       16      02 5001400US1602  1602   C2     114 111948989280 1081502469  3</span>
<span class="co">#&gt; 4       06      50 5001400US0650  0650   C2     114   7219205047   43666727  4</span>
<span class="co">#&gt; 5       06      16 5001400US0616  0616   C2     114   7354278768  118616551  5</span>
<span class="co">#&gt; 6       49      02 5001400US4902  4902   C2     114 103638076153 2945583941  6</span>
<span class="co">#&gt; 7       06      49 5001400US0649  0649   C2     114   1432623041  512378639  7</span>
<span class="co">#&gt; 8       06      08 5001400US0608  0608   C2     114  85126210480  450307265  8</span>
<span class="co">#&gt; 9       06      20 5001400US0620  0620   C2     114  12624185548 1574913163  9</span>
<span class="co">#&gt; 10      06      32 5001400US0632  0632   C2     114    321774529    5320498 10</span>
<span class="co">#&gt;                              geom</span>
<span class="co">#&gt; 1  MULTIPOLYGON (((-13628819 4...</span>
<span class="co">#&gt; 2  MULTIPOLYGON (((-13086531 4...</span>
<span class="co">#&gt; 3  MULTIPOLYGON (((-12950296 5...</span>
<span class="co">#&gt; 4  MULTIPOLYGON (((-13053482 3...</span>
<span class="co">#&gt; 5  MULTIPOLYGON (((-13497338 4...</span>
<span class="co">#&gt; 6  MULTIPOLYGON (((-12696318 4...</span>
<span class="co">#&gt; 7  MULTIPOLYGON (((-13105979 3...</span>
<span class="co">#&gt; 8  MULTIPOLYGON (((-13319259 4...</span>
<span class="co">#&gt; 9  MULTIPOLYGON (((-13589114 4...</span>
<span class="co">#&gt; 10 MULTIPOLYGON (((-13143818 4...</span>

<span class="co">## Start an API request object</span>
<span class="op">(</span><span class="fu"><a href="../reference/ca_loc_sf.html">ca_loc_sf</a></span><span class="op">(</span>loc <span class="op">=</span> <span class="va">cdistricts_sf</span>, idfld <span class="op">=</span> <span class="st">"geoid"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): </span>
<span class="co">#&gt;   Simple Feature MULTIPOLYGON (66 feature(s))</span>
<span class="co">#&gt;   ID field: geoid</span>
<span class="co">#&gt; </span></code></pre></div>
</div>
<div id="datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#datasets" class="anchor"></a>Datasets</h2>
<p>A Cal-Adapt API request must also specify the data layers(s) to retrieve. A description of the datasets on Cal-Adapt is beyond the scope of this vignette, but some general guidelines include:</p>
<ol style="list-style-type: lower-roman">
<li><p>Review the <a href="https://cal-adapt.org/data/">data documentation</a> on Cal-Adapt, including the <a href="https://cal-adapt.org/blog/2020/webinar-jan-2020/">Introduction to Climate Data</a> webinar.</p></li>
<li><p>A local copy of Cal-Adapt data catalog can be retrieved from <code><a href="../reference/ca_catalog_rs.html">ca_catalog_rs()</a></code>, which returns a tibble. One way to find a dataset for your project is to view the catalog in a RStudio viewer pane and use the filter tool to find specific datasets.</p></li>
</ol>
<pre><code><a href="https://rdrr.io/r/utils/View.html">View(ca_catalog_rs())</a></code></pre>
<ol start="3" style="list-style-type: lower-roman">
<li>To search for data layers and view their properties, you can use <code><a href="../reference/ca_catalog_search.html">ca_catalog_search()</a></code>, passing it keywords or a slug. Partial matches are returned as well.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ca_catalog_search.html">ca_catalog_search</a></span><span class="op">(</span><span class="st">"pr_day_gridmet"</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; pr_day_gridmet</span>
<span class="co">#&gt;   name: gridMET daily precipitation historical</span>
<span class="co">#&gt;   url: https://api.cal-adapt.org/api/series/pr_day_gridmet/</span>
<span class="co">#&gt;   tres: daily</span>
<span class="co">#&gt;   begin: 1979-01-01T00:00:00Z</span>
<span class="co">#&gt;   end: 2020-12-31T00:00:00Z</span>
<span class="co">#&gt;   units: mm</span>
<span class="co">#&gt;   num_rast: 1</span>
<span class="co">#&gt;   id: 366</span>
<span class="co">#&gt;   xmin: -124.579167</span>
<span class="co">#&gt;   xmax: -113.370833</span>
<span class="co">#&gt;   ymin: 31.545833</span>
<span class="co">#&gt;   ymax: 43.754167</span></code></pre></div>
<div id="specifying-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#specifying-datasets" class="anchor"></a>Specifying Datasets</h3>
<p>Once youâ€™ve identified which dataset you need, add functions to the Cal-Adapt API request. The groups of functions you use to specify datasets fall in three categories: 1) one of the main climate models, 2) observed climate data, and 3) slugs.</p>
<p><br></p>
<p><strong>Modeled Climate Data</strong></p>
<p>Many of Cal-Adaptâ€™s datasets are based on the direct output of global climate models (e.g., temperature, precipitation) or their derivatives (e.g., snow water equivalent, evaoptranspiration). These models have been used to predict both future and historic conditions based on specific emissions scenarios. API requests for modeled climate data should include:</p>
<ul>
<li>climate variable(s) - e.g., tasmin, tasmax, pr, et, etc.<br>
</li>
<li>GCM(s)</li>
<li>emissions scenario(s)</li>
<li>temporal period - e.g., year, day, month</li>
</ul>
<p>To help you construct an API request for modeled climate data, the following built-in constants provide valid values. Note that not all combinations have an existing dataset.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cvars</span>
<span class="co">#&gt;  [1] "tasmax"     "tasmin"     "pr"         "swe"        "baseflow"  </span>
<span class="co">#&gt;  [6] "ET"         "rainfall"   "runoff"     "snowfall"   "soilMoist1"</span>
<span class="co">#&gt; [11] "Tair"</span>

<span class="va">gcms</span>
<span class="co">#&gt;  [1] "HadGEM2-ES" "CNRM-CM5"   "CanESM2"    "MIROC5"     "ACCESS1-0" </span>
<span class="co">#&gt;  [6] "CCSM4"      "CESM1-BGC"  "CMCC-CMS"   "GFDL-CM3"   "HadGEM2-CC"</span>
<span class="co">#&gt; [11] "ens32avg"   "ens32max"   "ens32min"</span>

<span class="va">scenarios</span>
<span class="co">#&gt; [1] "rcp45"      "rcp85"      "historical"</span>

<span class="va">periods</span>
<span class="co">#&gt; [1] "day"    "month"  "year"   "30yavg"</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/ca_cvar.html">ca_cvar</a></span><span class="op">(</span>cvar <span class="op">=</span> <span class="st">"tasmin"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/ca_gcm.html">ca_gcm</a></span><span class="op">(</span>gcm <span class="op">=</span> <span class="va">gcms</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/ca_scenario.html">ca_scenario</a></span><span class="op">(</span><span class="st">"rcp85"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/ca_period.html">ca_period</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): NA</span>
<span class="co">#&gt; Variable(s): tasmin</span>
<span class="co">#&gt; Temporal aggregration period(s): year</span>
<span class="co">#&gt; GCM(s): HadGEM2-ES, CNRM-CM5, CanESM2, MIROC5</span>
<span class="co">#&gt; Scenario(s): rcp85</span>
<span class="co">#&gt; </span></code></pre></div>
<p><br></p>
<p><strong>Observed Data</strong></p>
<p>Livneh data are based on historic records that have been spatially interpolated. To specify a Livneh dataset, include <code><a href="../reference/ca_livneh.html">ca_livneh()</a></code> in the request and omit GCMs and emission scenarios:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">ex2_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_cvar.html">ca_cvar</a></span><span class="op">(</span>cvar <span class="op">=</span> <span class="st">"pr"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/ca_livneh.html">ca_livneh</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/ca_period.html">ca_period</a></span><span class="op">(</span><span class="st">"year"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): NA</span>
<span class="co">#&gt; Variable(s): pr</span>
<span class="co">#&gt; Temporal aggregration period(s): year</span>
<span class="co">#&gt; Livneh data: TRUE</span>
<span class="co">#&gt; </span></code></pre></div>
<p><br></p>
<p><strong>Slugs</strong></p>
<p>Each of the nearly 950 raster series available through the Cal-Adapt API has a unique <code>slug</code>, or short name. You can look up slugs in the Cal-Adapt catalog (<code><a href="../reference/ca_catalog_rs.html">ca_catalog_rs()</a></code>).</p>
<p>If the dataset youâ€™re interested in canâ€™t be specified using the functions above, you can use <code><a href="../reference/ca_slug.html">ca_slug()</a></code> to specify it by its slug. With <code><a href="../reference/ca_slug.html">ca_slug()</a></code>, you donâ€™t have to include the climate variable, period, GCM, or scenario - those are all implied by the slug. But youâ€™ll still need to specify a location and optionally dates for the API request to be complete.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/ca_slug.html">ca_slug</a></span><span class="op">(</span>slug <span class="op">=</span> <span class="st">"exheat_year_ens32avg_historical"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): NA</span>
<span class="co">#&gt; Slug(s): exheat_year_ens32avg_historical</span>
<span class="co">#&gt; </span></code></pre></div>
</div>
</div>
<div id="dates" class="section level2">
<h2 class="hasAnchor">
<a href="#dates" class="anchor"></a>Dates</h2>
<p>Date ranges are optional in API requests. If a date range is not provided, data for the entire time range of the dataset will be returned. You can include a date range with <code><a href="../reference/ca_dates.html">ca_dates()</a></code> or <code><a href="../reference/ca_years.html">ca_years()</a></code>. Enter years as integers, and dates as character values <code>"yyyy-mm-dd"</code>. Examples:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/ca_years.html">ca_years</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">2035</span>, end <span class="op">=</span> <span class="fl">2065</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): NA</span>
<span class="co">#&gt; Dates: 2035-01-01 to 2065-12-31</span>
<span class="co">#&gt; </span>
<span class="op">(</span><span class="fu"><a href="../reference/ca_dates.html">ca_dates</a></span><span class="op">(</span>start <span class="op">=</span> <span class="st">"2050-03-15"</span>, end <span class="op">=</span> <span class="st">"2070-10-31"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): NA</span>
<span class="co">#&gt; Dates: 2050-03-15 to 2070-10-31</span>
<span class="co">#&gt; </span></code></pre></div>
</div>
<div id="options" class="section level2">
<h2 class="hasAnchor">
<a href="#options" class="anchor"></a>Options</h2>
<p><code><a href="../reference/ca_options.html">ca_options()</a></code> is how you specify any other options for the request. Currently the only option in use is <code>spatial_ag</code>. <code>spatial_ag</code> is the spatial aggregation function that should be used when querying polygon areas. If a feature intersects more than one LOCA grid cell, this function will be used to collapse the grid cells into one value.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/ca_options.html">ca_options</a></span><span class="op">(</span>spatial_ag <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): NA</span>
<span class="co">#&gt; Options:</span>
<span class="co">#&gt;   spatial ag: mean</span>
<span class="co">#&gt; </span></code></pre></div>
</div>
<div id="checking-the-ingetrity-of-an-api-request" class="section level2">
<h2 class="hasAnchor">
<a href="#checking-the-ingetrity-of-an-api-request" class="anchor"></a>Checking the ingetrity of an API request()</h2>
<p>Before you use an API request to fetch data, there are a couple of things you can do to check its validity.</p>
<p>To verify the API request covers the correct location, you can plot it. Below we plot a sample API request returned by <code><a href="../reference/ca_example_apireq.html">ca_example_apireq()</a></code>. Adding locagrid = TRUE overlay the actual LOCA grid cells.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">samp_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ca_example_apireq.html">ca_example_apireq</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Cal-Adapt API Request</span>
<span class="co">#&gt; Location(s): </span>
<span class="co">#&gt;   Simple Feature POLYGON (1 feature(s))</span>
<span class="co">#&gt;   ID field: id</span>
<span class="co">#&gt; Variable(s): pr</span>
<span class="co">#&gt; Temporal aggregration period(s): day</span>
<span class="co">#&gt; GCM(s): CCSM4</span>
<span class="co">#&gt; Scenario(s): rcp85</span>
<span class="co">#&gt; Dates: 2010-01-01 to 2012-12-31</span>
<span class="co">#&gt; Options:</span>
<span class="co">#&gt;   spatial ag: mean</span>
<span class="co">#&gt; </span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">samp_cap</span>, locagrid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-b971409b56a7388aefa4" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b971409b56a7388aefa4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"createMapPane","args":["tmap402",402]},{"method":"addProviderTiles","args":["Esri.NatGeoWorldMap",null,"Esri.NatGeoWorldMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addPolygons","args":[[[[{"lng":[-120.7635,-120.4285,-120.3873,-120.7377,-120.7635],"lat":[38.9092,38.91321,38.66819,38.66015,38.9092]}]]],"X1","Query Location(s)",{"interactive":true,"className":"","pane":"tmap401","stroke":true,"color":"#666666","weight":1,"opacity":1,"fill":true,"fillColor":"#FF0000","fillOpacity":0.2,"dashArray":"none","smoothFactor":1,"noClip":false},"<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>1<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>id<\/nobr><\/td><td align=\"right\"><nobr>1<\/nobr><\/td><\/tr><\/table><\/div>",null,"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[39,39,38.9375,38.9375,39]}]],[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[38.9375,38.9375,38.875,38.875,38.9375]}]],[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[38.875,38.875,38.8125,38.8125,38.875]}]],[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[38.8125,38.8125,38.75,38.75,38.8125]}]],[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[38.75,38.75,38.6875,38.6875,38.75]}]],[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[38.6875,38.6875,38.625,38.625,38.6875]}]],[[{"lng":[-120.875,-120.8125,-120.8125,-120.875,-120.875],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.8125,-120.75,-120.75,-120.8125,-120.8125],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.75,-120.6875,-120.6875,-120.75,-120.75],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.6875,-120.625,-120.625,-120.6875,-120.6875],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.625,-120.5625,-120.5625,-120.625,-120.625],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.5625,-120.5,-120.5,-120.5625,-120.5625],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.5,-120.4375,-120.4375,-120.5,-120.5],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.4375,-120.375,-120.375,-120.4375,-120.4375],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.375,-120.3125,-120.3125,-120.375,-120.375],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]],[[{"lng":[-120.3125,-120.25,-120.25,-120.3125,-120.3125],"lat":[38.625,38.625,38.5625,38.5625,38.625]}]]],["X1.1","X2","X3","X4","X5","X6","X7","X8","X9","X10","X11","X12","X13","X14","X15","X16","X17","X18","X19","X20","X21","X22","X23","X24","X25","X26","X27","X28","X29","X30","X31","X32","X33","X34","X35","X36","X37","X38","X39","X40","X41","X42","X43","X44","X45","X46","X47","X48","X49","X50","X51","X52","X53","X54","X55","X56","X57","X58","X59","X60","X61","X62","X63","X64","X65","X66","X67","X68","X69","X70"],"LOCA grid",{"interactive":false,"className":"","pane":"tmap402","stroke":true,"color":"#696969","weight":1,"opacity":1,"fill":true,"fillOpacity":0,"dashArray":"none","smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[[],["Query Location(s)","LOCA grid"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[38.5625,39],"lng":[-120.875,-120.25]},"fitBounds":[38.66015,-120.7635,38.91321,-120.3873,[]]},"evals":[],"jsHooks":[]}</script><p><br></p>
<p><code><a href="../reference/ca_preflight.html">ca_preflight()</a></code> does a more complete check of an API request, double-checking that it refers to an existing dataset, data are available for the requested date range, the request doesnâ€™t have conflicting elements, it isnâ€™t too big, etc. Some warnings are specific to fetching values vs fetching rasters, and are reported accordingly:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ca_example_apireq.html">ca_example_apireq</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/ca_preflight.html">ca_preflight</a></span><span class="op">(</span><span class="op">)</span>  
<span class="co">#&gt; General issues</span>
<span class="co">#&gt;  - none found</span>
<span class="co">#&gt; Issues for querying values</span>
<span class="co">#&gt;  - none found</span>
<span class="co">#&gt; Issues for downloading rasters</span>
<span class="co">#&gt;  - none found</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andy Lyons, California Strategic Growth Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
