<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Use a sf data frame as the location for a Cal-Adapt API request — ca_loc_sf • caladaptr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use a sf data frame as the location for a Cal-Adapt API request — ca_loc_sf"><meta name="description" content="Specifies a sf data frame as the location for a Cal-Adapt API request"><meta property="og:description" content="Specifies a sf data frame as the location for a Cal-Adapt API request"><meta property="og:image" content="https://ucanr-igis.github.io/caladaptr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">caladaptr</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/api-requests.html">API Requests</a></li>
    <li><a class="dropdown-item" href="../articles/large-queries.html">Large Queries</a></li>
    <li><a class="dropdown-item" href="../articles/rasters-pt1.html">Rasters Part I: Download, Combine, Subset, and Compute Pixel Summaries</a></li>
    <li><a class="dropdown-item" href="../articles/rasters-pt2.html">Rasters Part II: Six-Dimensional Climate Data Cubes and Spatial Queries</a></li>
    <li><a class="dropdown-item" href="../articles/rasters-pt3.html">Rasters Part III: Downloading Rasters for Large Areas</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-notebooks" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Notebooks</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-notebooks"><li><a class="dropdown-item" href="https://ucanr-igis.github.io/caladaptr-res/notebooks/caladaptr_intro.nb.html">Introduction</a></li>
    <li><a class="dropdown-item" href="https://ucanr-igis.github.io/caladaptr-res/notebooks/chill.nb.html">Compute Chill</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-shiny-apps" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Shiny Apps</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-shiny-apps"><li><a class="external-link dropdown-item" href="https://caladaptr.shinyapps.io/timeseries/">Annual Data Time Series</a></li>
    <li><a class="external-link dropdown-item" href="https://ucanr-igis.shinyapps.io/chill/">Projected Chill Hours</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ucanr-igis/caladaptr.apps/">caladpatr.apps package</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-videos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Videos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-videos"><li><a class="external-link dropdown-item" href="https://youtu.be/6sDwXPbSYOQ">caladaptR Overview</a></li>
    <li><a class="external-link dropdown-item" href="https://youtu.be/APCIBs35BJg">Code Demo</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-workshops" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Workshops</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-workshops"><li><a class="dropdown-item" href="https://ucanr-igis.github.io/caladaptr-res/workshops/ca_intro_apr22/">Working with Cal-Adapt Climate Data in R (April 2022)</a></li>
    <li><a class="dropdown-item" href="https://ucanr-igis.github.io/caladaptr-res/workshops/ca_intro_oct21/">Getting Started (Oct 2021)</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/ucanr-igis/caladaptr/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Use a sf data frame as the location for a Cal-Adapt API request</h1>
      <small class="dont-index">Source: <a href="https://github.com/ucanr-igis/caladaptr/blob/master/R/ca_loc_sf.R" class="external-link"><code>R/ca_loc_sf.R</code></a></small>
      <div class="d-none name"><code>ca_loc_sf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Specifies a sf data frame as the location for a Cal-Adapt API request</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ca_loc_sf</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="ca_apireq.html">ca_apireq</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">loc</span>, idfld <span class="op">=</span> <span class="cn">NULL</span>, idval <span class="op">=</span> <span class="cn">NULL</span>, dTolerance <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A Cal-Adapt API request</p></dd>


<dt id="arg-loc">loc<a class="anchor" aria-label="anchor" href="#arg-loc"></a></dt>
<dd><p>A simple feature data frame</p></dd>


<dt id="arg-idfld">idfld<a class="anchor" aria-label="anchor" href="#arg-idfld"></a></dt>
<dd><p>The name of a column in loc containing unique values, or the name</p></dd>


<dt id="arg-idval">idval<a class="anchor" aria-label="anchor" href="#arg-idval"></a></dt>
<dd><p>A vector of unique values</p></dd>


<dt id="arg-dtolerance">dTolerance<a class="anchor" aria-label="anchor" href="#arg-dtolerance"></a></dt>
<dd><p>A numeric value used to simplify polgyons, see Details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>loc</code> should be a simple feature data frame with point or polygon features.
The sf object should have a valid CRS, but does not have to be geographic.
Both 'single' and 'multipart' polygons can be used, but only simple point features are
supported. To convert a multipoint feature layer into a single point layer, use <code><a href="https://r-spatial.github.io/sf/reference/st_cast.html" class="external-link">st_cast</a></code>.</p>
<p><code>idfld</code> should be the name of a column in <code>loc</code> containing unique values. When you
fetch values from Cal-Adapt, this column will be returned in the results to help you
join the values to other tables. Alternately, you can use <code>idfld</code> to pass the name of
a new column, together with a vector of unique values in <code>idval</code> (one for each row
in <code>loc</code>).</p>
<p>Note you can not use <code>idval</code> as a filter. If you want to filter the features of <code>loc</code> to
query, use a filter expression as part of the value of <code>loc</code> (e.g., with
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></code> or <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></code>).</p>
<p>If <code>loc</code> is a polygon layer, you'll also need to specify how to spatially aggregate the queried
values if a feature overlaps more than one pixel. See <code><a href="ca_options.html">ca_options</a></code>.</p>
<p><code>dTolerance</code> is a value in decimal degrees used to simplify polygons. If <code>dTolerance &gt; 0</code>,
<code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">geos_unary</a>{st_simplify}</code> will be called to remove polygon nodes within <code>dTolerance</code> of another node,
before fetching data. This can reduce the amount of spatial data that needs to be sent to the server,
which can improve performance particularly when you have very fine grained polygons.
Simplifying polygons can modify (generally reduce) the pixels that a polygon overlaps, so use with caution.
<code>dTolerance =	0.001</code> represents &lt;100m on the ground within Cal-Adapt range of latitude.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andy Lyons.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

